<%- include('partials/header') %>

<!-- <#% if (locals.query) { %>
    <div class="search-container">
        <form action="/search" method="GET" class="search-form">
            <input type="text" name="q" placeholder="Search books..." value="<#%= query || '' %>" required>
            <button type="submit">Search</button>
        </form>
    </div>
<#% } %> -->

<% if (books && books.length > 0) { %>
  <div class="book-grid">
    <% books.forEach(book => { %>
      <div class="book-card">
        <img 
          src="<%= book.thumbnail || '/images/placeholder.png' %>" 
          alt="<%= book.title %>" 
          class="book-cover"
        />

        <div class="book-info">
          <h2><%= book.title %></h2>
          <% if (book.authors) { %>
            <p class="author"><strong>By:</strong> <%= book.authors.join(', ') %></p>
          <% } %>

          <% if (book.publishedDate) { %>
            <p class="year"><strong>Published:</strong> <%= book.publishedDate %></p>
          <% } %>

          <% if (book.categories) { %>
            <p class="category"><strong>Genre:</strong> <%= book.categories.join(', ') %></p>
          <% } %>

          <% if (book.description) { %>
            <p class="desc"><%= book.description.substring(0, 150) %>...</p>
          <% } %>

          <div class="actions">
            <a href="<%= book.infoLink %>" target="_blank">View on Google Books</a>
            <a href="/books/<%= book.id %>">Details</a>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
<% } else if (query) { %>
  <p class="empty">No results found for "<%= query %>".</p>
<% } else { %>
  <p class="empty">Search for a book above ðŸ‘†</p>
<% } %>

<%- include('partials/footer') %>